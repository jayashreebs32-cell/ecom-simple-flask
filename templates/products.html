{% extends 'base.html' %}

{% block content %}
<div class="container">
  <h1>Products</h1>
  <div class="products-grid">
    {% for p in products %}
    <div class="product-card">
      <h3>{{ p['name'] }}</h3>
      <p class="price">{{ format_price(p['price_cents']) }}</p>
      <p class="description">{{ p['description'] }}</p>
      {% if session.get('user_id') %}
        <button data-add-to-cart data-product-id="{{ p['id'] }}">Add to cart</button>
      {% else %}
        <a href="{{ url_for('login_get') }}" class="btn-secondary">Login to add</a>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}